{% extends "base.html" %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2><i class="fas fa-users me-2"></i>จัดการผู้ใช้งาน</h2>
    <a href="{{ url_for('add_user') }}" class="btn btn-primary">
        <i class="fas fa-plus me-2"></i>เพิ่มผู้ใช้ใหม่
    </a>
</div>

<div class="card">
    <div class="card-body">
        <div class="table-responsive">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>ชื่อผู้ใช้</th>
                        <th>บทบาท</th>
                        <th>วันที่สร้าง</th>
                        <th>จัดการ</th>
                    </tr>
                </thead>
                <tbody>
                    {% for user in users %}
                    <tr>
                        <td>{{ user[0] }}</td>
                        <td>
                            <i class="fas fa-user me-2"></i>{{ user[1] }}
                        </td>
                        <td>
                            {% if user[3] == 'admin' %}
                                <span class="badge bg-danger">ผู้ดูแลระบบ</span>
                            {% else %}
                                <span class="badge bg-primary">ผู้ใช้งาน</span>
                            {% endif %}
                        </td>
                        <td>{{ user[4][:19] if user[4] else '-' }}</td>
                        <td>
                            {% if user[1] != '63010468' %}
                            <form method="POST" action="{{ url_for('delete_user', user_id=user[0]) }}" class="d-inline" 
                                  onsubmit="return confirm('คุณแน่ใจหรือไม่ที่จะลบผู้ใช้นี้?')">
                                <button type="submit" class="btn btn-danger btn-sm">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </form>
                            {% else %}
                            <span class="text-muted">ไม่สามารถลบได้</span>
                            {% endif %}
                        </td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="5" class="text-center text-muted">ไม่มีข้อมูลผู้ใช้</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}